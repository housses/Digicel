<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>B2B_CALA_Solution_Design_Approval</fullName>
    <active>true</active>
    <errorConditionFormula>IF(NOT(CONTAINS(RecordType.DeveloperName, &quot;Trend&quot;)) &amp;&amp; 
NOT(CONTAINS(Owner.UserRole.Name, &quot;Fiji&quot;)) &amp;&amp; 
NOT(CONTAINS(Owner.UserRole.Name, &quot;Samoa&quot;)) &amp;&amp; 
NOT(CONTAINS(Owner.UserRole.Name, &quot;Vanuatu&quot;)) &amp;&amp; 
NOT(CONTAINS(Owner.UserRole.Name, &quot;Nauru&quot;)) &amp;&amp; 
NOT(CONTAINS(Owner.UserRole.Name, &quot;Tonga&quot;)) &amp;&amp; 
NOT(CONTAINS(RecordType.DeveloperName, &quot;PNG&quot;)) &amp;&amp; 
NOT(CONTAINS($UserRole.Name, &quot;Entertainment&quot;)) &amp;&amp; 
NOT(CONTAINS($UserRole.Name, &quot;Top-up&quot;)) &amp;&amp; 
NOT(CONTAINS($UserRole.Name, &quot;IDOM Technologies&quot;)) &amp;&amp;
NOT(CONTAINS($UserRole.Name, &quot;IDOM - FWI&quot;)) &amp;&amp;
NOT(ISPICKVAL ($User.Digicel_Company_Name__c , &quot;IDOM Technologies&quot;)) &amp;&amp;
NOT(CONTAINS($UserRole.Name, &quot;IDOM - Indian Ocean&quot;)) &amp;&amp;
NOT(CONTAINS($UserRole.Name, &quot;IDOM - IO&quot;)) &amp;&amp;
NOT(CONTAINS($UserRole.Name, &quot;International&quot;)) &amp;&amp;
NOT(CONTAINS($UserRole.Name, &quot;Capacity&quot;)) &amp;&amp; 
NOT(CONTAINS($UserRole.Name, &quot;DIBL - IoT&quot;)),
NOT(CONTAINS($UserRole.Name, &quot;Wholesale&quot;)) &amp;&amp;
AND( Solution_Design_Approved__c = FALSE, ISCHANGED( StageName ),
(ISPICKVAL(StageName,&quot;Proposal Acceptance&quot;) || 
ISPICKVAL(StageName,&quot;Proposal Review&quot;) || 
ISPICKVAL(StageName,&quot;Closed Won&quot;) || 
ISPICKVAL(StageName,&quot;Billed&quot;))) 
,FALSE)

&amp;&amp; $Profile.Name &lt;&gt;&quot;System Administrator&quot;
&amp;&amp;  $UserRole.Name  &lt;&gt;&quot;French West Indies&quot;
&amp;&amp;  Digicel_Country__c &lt;&gt; &quot;FWI&quot;</errorConditionFormula>
    <errorDisplayField>StageName</errorDisplayField>
    <errorMessage>You cannot change to this stage manually without submitting your opportunity for approval. 

Please change the stage to &quot;Commercial Review&quot; and press the &quot;Submit for Approval&quot; button</errorMessage>
</ValidationRule>
